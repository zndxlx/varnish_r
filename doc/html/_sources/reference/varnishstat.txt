.. role:: ref(emphasis)

.. _varnishstat(1):

===========
varnishstat
===========

------------------------
Varnish Cache statistics
------------------------

:Manual section: 1

SYNOPSIS
========

.. include:: ../include/varnishstat_synopsis.rst
varnishstat |synopsis|

DESCRIPTION
===========

The varnishstat utility displays statistics from a running varnishd(1) instance.

The following options are available:

.. include:: ../include/varnishstat_options.rst

CURSES MODE
===========

When neither -1, -j or -x options are given, the application starts up
in curses mode. This shows a continuously updated view of the counter
values, along with their description.

The top area shows process uptime information.

The center area shows a list of counter values.

The bottom area shows the description of the currently selected
counter.

Columns
-------

The following columns are displayed, from left to right:

Name
	The name of the counter

Current
	The current value of the counter.

Change
	The average per second change over the last update interval.

Average
	The average value of this counter over the runtime of the
	Varnish daemon, or a period if the counter can't be averaged.

Avg_10
	The moving average over the last 10 update intervals.

Avg_100
	The moving average over the last 100 update intervals.

Avg_1000
	The moving average over the last 1000 update intervals.

Key bindings
------------

The following keys control the interactive display:

<UP>
	Navigate the counter list one line up.

<DOWN>
	Navigate the counter list one line down.

<PAGEUP> or <b>
	Navigate the counter list one page up.

<PAGEDOWN> or <SPACE>
	Navigate the counter list one page down.

<d>
	Toggle between showing and hiding unseen counters. Unseen
	counters are those that has been zero for the entire runtime
	of varnishstat. Defaults to hide unseen counters.

<e>
	Toggle scaling of values.

<g>
	Go to the top of the counter list.

<G>
	Go to the bottom of the counter list.

<v>
	Cycle through the verbosity levels. Defaults to only showing
	informational counters.

<q>
	Quit.

<CTRL+T>
	Sample now.

OUTPUTS
=======

The XML output format is::

  <varnishstat timestamp="YYYY-MM-DDTHH:mm:SS">
    <stat>
      <type>FIELD TYPE</type>
      <ident>FIELD IDENT</ident>
      <name>FIELD NAME</name>
      <value>FIELD VALUE</value>
      <flag>FIELD SEMANTICS</flag>
      <format>FIELD DISPLAY FORMAT</format>
      <description>FIELD DESCRIPTION</description>
    </stat>
    [..]
  </varnishstat>

The JSON output format is::

  {
    "timestamp": "YYYY-MM-DDTHH:mm:SS",
    "FIELD NAME": {
      "description": "FIELD DESCRIPTION",
      "type": "FIELD TYPE", "ident": "FIELD IDENT", "flag": "FIELD SEMANTICS", "format": "FIELD DISPLAY FORMAT",
      "value": FIELD VALUE
    },
    "FIELD NAME": {
      "description": "FIELD DESCRIPTION",
      "type": "FIELD TYPE", "ident": "FIELD IDENT", "flag": "FIELD SEMANTICS", "format": "FIELD DISPLAY FORMAT",
      "value": FIELD VALUE
    },
    [..]
  }


Type and ident are optional.  Timestamp is the time when the report was
generated by varnishstat.


SEE ALSO
========

* :ref:`varnishd(1)`
* :ref:`varnishhist(1)`
* :ref:`varnishlog(1)`
* :ref:`varnishncsa(1)`
* :ref:`varnishtop(1)`
* curses(3)
* :ref:`varnish-counters(7)`


AUTHORS
=======

This manual page was written by Dag-Erling Sm√∏rgrav, Per Buer,
Lasse Karstensen and Martin Blix Grydeland.
